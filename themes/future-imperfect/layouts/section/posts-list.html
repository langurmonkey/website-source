{{ partial "header" . }}
    {{ partial "navbar" . }}
        <div id="main">
            <header>
                <h2>Posts list</h2>
            </header>
            <article class="post">
                {{ $.Scratch.Set "recentPosts" .Site.Pages }}

                {{ $.Scratch.Set "postLimit" 2000 }}

                <div class="posts-list">
                    {{ range first ($.Scratch.Get "postLimit") (where ($.Scratch.Get "recentPosts") "Type" "post") }}
                    <div class="post-in-list">
                        {{ $.Scratch.Set "dateType" .Date }}
                        <time class="published" datetime='{{ ($.Scratch.Get "dateType").Format "2006-01-02" }}'> 
                           [ {{ ($.Scratch.Get "dateType").Format "January 2, 2006" }} ]
                        </time>

                        <a href="{{ .RelPermalink }}">{{ .Title | truncate 80 }}</a>&nbsp;
                    </div>
                    {{ end }}
                </div>

            {{ if ge (len (where .Site.Pages "Type" "post")) ($.Scratch.Get "postLimit") }}
            <a href=
               {{ with .Site.Params.viewMorePostLink }}
               {{ . }}
               {{ else }}
               "/post/"
               {{ end }}
               class="button">View more posts</a>
            {{ end }}
            </article>
        </div>
    {{ partial "sidebar" . }}
{{ partial "footer" . }}
